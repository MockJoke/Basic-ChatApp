<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Chat App</title>
  </head>

  <body>
    <header class="chat-header">
      <h1>Cheat Chat</h1>
    </header>

    <div class="app-container">
      <aside class="sidebar">
        <header class="sidebar-header">
          <h2>
            Online Users
          </h2>
        </header>
        <ul class="contact-list">
          <!-- Chat preview items will be added here dynamically -->
        </ul>
      </aside>
      <section class="chat-container">
        <header class="currentcontact-info">
          <img src="./images/user1-avatar.png" alt="User Avatar" class="currentcontact-avatar">
          <p class="currentcontact-name">Joy</p>
        </header>
        <div class="message-container">
          <div class="message sender">
            <p>Hello! How are you?</p>
          </div>
          <div class="message receiver">
            <p>I'm good, thank you!</p>
          </div>
          <!-- Add more messages here -->
        </div>
        <div class="message-input">
          <input type="text" id="input" placeholder="Type your message..." />
          <button id="send-button">Send</button>
        </div>
      </section>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();

      const input = document.getElementById("input");
      const sendButton = document.getElementById("send-button");
      const messageContainer = document.querySelector(".message-container");

      sendButton.addEventListener("click", () => {
        const message = input.value;
        if (message.trim() !== "") {
          socket.emit("chat message", message);
          input.value = "";
        }
      });

      socket.on("chat message", (message) => {
        const messageDiv = document.createElement("div");
        messageDiv.classList.add("message", "receiver");
        messageDiv.innerHTML = `<p>${message}</p>`;
        messageContainer.appendChild(messageDiv);
        messageContainer.scrollTop = messageContainer.scrollHeight;
      });
    </script>

    <script>
      const contacts = [
        { name: "Joy", lastMessage: "Hello there!", avatar: './images/user1-avatar.png'},
        { name: "Riya", lastMessage: "How are you?", avatar: './images/user2-avatar.png'},
        // Add more contacts here
      ];

      const contactList = document.querySelector(".contact-list");

      // Populate the contact list with chat previews
      contacts.forEach((contact) => {
        const contactItem = document.createElement("div");
        contactItem.classList.add("contact-item");
        contactItem.innerHTML = `
          <img src="${contact.avatar}" alt="User Avatar" class="avatar">
          <div class="contact-info">
            <p class="contact-name">${contact.name}</p>
            <p class="last-message">${contact.lastMessage}</p>
          </div>
        `;
        contactList.appendChild(contactItem);
      });
    </script>
  </body>
</html>
